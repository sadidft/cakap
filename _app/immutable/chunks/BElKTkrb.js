import{w as i}from"./CGbqAFI9.js";import{db as e}from"./h3MKsja5.js";import{kkRepository as d}from"./97ReT2PQ.js";const r={async all(t=1){return e.ktp.where("profile_id").equals(t).toArray()},async getById(t){return e.ktp.get(t)},async getByNIK(t){return e.ktp.where("nik").equals(t).first()},async add(t){return t.created_at=t.created_at||new Date().toISOString(),t.updated_at=t.updated_at||null,e.ktp.add(t)},async update(t,a){return a.updated_at=new Date().toISOString(),e.ktp.update(t,a)}},o=i([]);async function s(t=1){const a=await r.all(t);o.set(a||[])}async function p(t){const a=await r.add(t);if(t.nik){const n=await d.findByNIK(t.nik);n&&await r.update(a,{linked_kk_id:n.id})}return await s(t.profile_id||1),a}export{p as addKTP,o as ktpStore,s as loadAllKTP};
