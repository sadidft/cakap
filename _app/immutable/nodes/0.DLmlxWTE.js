const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/B84wUVil.js","../chunks/h3MKsja5.js","../chunks/PPVm8Dsz.js"])))=>i.map(i=>d[i]);
import{_ as L}from"../chunks/PPVm8Dsz.js";import{a as b,f as A}from"../chunks/DFmd7aBj.js";import"../chunks/DigF5LTR.js";import{o as w}from"../chunks/C4DNNmEB.js";import{v,Y as M,X as P,Z as W,b7 as j,a3 as O,al as x,a1 as h,V as E,a2 as F,W as I,p as N,s as C,aC as q,aD as B,t as V,a as z,m as H,n as g,e as X,c,b as p,r as d,g as Y,b8 as Z}from"../chunks/LtRqTWwp.js";import{s as G}from"../chunks/NpB3I255.js";import{i as J}from"../chunks/BvBIkWR3.js";import{l as K,s as Q}from"../chunks/BPcVCNGp.js";import{w as U}from"../chunks/CGbqAFI9.js";import{db as s}from"../chunks/h3MKsja5.js";function $(e,i,r,n,o){v&&M();var t=i.$$slots?.[r],l=!1;t===!0&&(t=i.children,l=!0),t===void 0||t(e,l?()=>n:n)}function ee(e,i){let r=null,n=v;var o;if(v){r=F;for(var t=I(document.head);t!==null&&(t.nodeType!==O||t.data!==e);)t=x(t);if(t===null)h(!1);else{var l=x(t);t.remove(),E(l)}}v||(o=document.head.appendChild(P()));try{W(()=>i(o),j)}finally{n&&(h(!0),E(r))}}const te={async all(){return s.profiles.toArray()},async getActive(){return s.profiles.where("is_active").equals(!0).first()},async getById(e){return s.profiles.get(e)},async add(e){return e.created_at=e.created_at||new Date().toISOString(),e.is_active=e.is_active??!0,s.profiles.add(e)},async setActive(e){return await s.profiles.toCollection().modify(i=>i.is_active=!1),s.profiles.update(e,{is_active:!0})}},D=U({});async function ae(){const e=await te.getActive();return e&&D.set(e),e}var se=A('<meta name="viewport" content="width=device-width, initial-scale=1"/> <link rel="manifest" href="/manifest.json"/>',1),ie=A('<div class="min-h-screen flex flex-col bg-gray-50"><header class="bg-white border-b" role="banner"><div class="max-w-3xl mx-auto px-4 py-4 flex items-center justify-between"><div class="flex items-center gap-3"><div class="w-10 h-10 rounded-md bg-primary flex items-center justify-center text-white font-bold">RC</div> <div><div class="text-lg font-semibold">RT-Cakap</div> <div class="text-sm text-gray-500"> </div></div></div> <nav aria-label="main" class="text-sm text-gray-600"><a href="/settings" class="mr-4">⚙️ Setelan</a> <a href="/help">❓ Cara pakai</a></nav></div></header> <main class="flex-1 max-w-3xl mx-auto w-full px-4 py-6"><!></main> <footer class="border-t bg-white py-4"><div class="max-w-3xl mx-auto px-4 text-center text-sm text-gray-500">RT-Cakap — offline-first demo</div></footer></div>');function ge(e,i){N(i,!1);const r=H();w(()=>!0),w(async()=>{if(await K(),await s.settings.get("mode_aman_locked")||!1){const a=prompt("Perangkat terkunci (Mode Aman). Masukkan password untuk membuka kunci");if(a)try{const{unlockDatabase:m}=await L(async()=>{const{unlockDatabase:u}=await import("../chunks/B84wUVil.js").then(R=>R.b);return{unlockDatabase:u}},__vite__mapDeps([0,1,2]),import.meta.url);await m(a),console.log("Device unlocked")}catch(m){console.warn("unlock failed",m),alert("Buka kunci gagal — beberapa data mungkin tetap terkunci")}else alert("Perangkat tetap terkunci — sebagian data tidak dapat diakses")}if(await ae(),document.addEventListener("visibilitychange",async()=>{try{const a=await s.settings.get("mode_aman"),m=await s.settings.get("mode_aman_locked");a&&a.value===!0&&!m&&(await s.settings.put({key:"mode_aman_locked",value:!0}),document.visibilityState==="hidden"&&console.log("Mode Aman: device auto-locked (background)"))}catch{}}),Q.subscribe(a=>{(a?.theme||"auto")==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark");const u=a?.font_size||"normal";document.documentElement.classList.remove("font-small","font-normal","font-large"),document.documentElement.classList.add(u==="large"?"font-large":u==="small"?"font-small":"font-normal")}),"serviceWorker"in navigator)try{await navigator.serviceWorker.register("/sw.js"),console.log("ServiceWorker registered")}catch(a){console.warn("SW registration failed",a)}}),D.subscribe(f=>C(r,f?.nama_rt||"RT-Cakap")),q(()=>{},()=>{C(r,"")}),B(),J();var n=ie();ee("12qhfyh",f=>{var a=se();g(2),X(()=>{Z.title="RT-Cakap (dev)"}),b(f,a)});var o=c(n),t=c(o),l=c(t),_=p(c(l),2),y=p(c(_),2),S=c(y);d(y),d(_),d(l),g(2),d(t),d(o);var k=p(o,2),T=c(k);$(T,i,"default",{}),d(k),g(2),d(n),V(()=>G(S,`${Y(r)??""} — Data warga di genggaman`)),b(e,n),z()}export{ge as component};
