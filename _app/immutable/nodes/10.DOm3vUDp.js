import{a as x,f as y}from"../chunks/DFmd7aBj.js";import"../chunks/DigF5LTR.js";import{o as X}from"../chunks/C4DNNmEB.js";import{p as B,s as I,t as R,a as q,m as C,c as a,b as i,r as t,g as l,n as T}from"../chunks/LtRqTWwp.js";import{s as w}from"../chunks/NpB3I255.js";import{r as Y,s as Z}from"../chunks/W_A9d85F.js";import{e as v}from"../chunks/BwVSfNZk.js";import{i as J}from"../chunks/BvBIkWR3.js";import{s as Q,a as r,l as U}from"../chunks/BPcVCNGp.js";import{i as $}from"../chunks/okGzk5Aq.js";import{d as aa,h as ta,l as ea}from"../chunks/B84wUVil.js";var ia=y('<button class="btn-base border">Nonaktifkan</button>'),sa=y('<button class="btn-base bg-primary text-white">Aktifkan</button>'),ra=y('<div class="bg-white border rounded-lg p-4"><div class="flex items-center justify-between"><div><div class="text-sm text-gray-500">Mode Aman (Enkripsi)</div> <div class="font-medium"> </div></div> <!></div></div>');function oa(A,M){B(M,!1);let o=C({});Q.subscribe(e=>I(o,e));async function S(){const e=prompt("Set password Mode Aman (ingat password ini)");if(e)try{const{key:s,salt:k,kdf:g}=await aa(e,null,{kdf:"auto"}),j=g||"pbkdf2",h=Array.from(k||[]).map(d=>d.toString(16).padStart(2,"0")).join("");await r("mode_aman",!0),await r("mode_aman_kdf",j),await r("mode_aman_salt",h);const P=await ta(e);await r("master_key_hash",P);try{await ea(e),alert("Mode Aman aktif â€” data terenkripsi pada perangkat")}catch(d){console.warn("lockDatabase failed",d),alert("Mode Aman aktif, tetapi enkripsi snapshot gagal")}}catch(s){console.warn("enableModeAman failed",s),alert("Gagal mengaktifkan Mode Aman")}}async function f(){confirm("Nonaktifkan Mode Aman? Data yang terenkripsi tidak bisa dipulihkan jika password hilang.")&&(await r("mode_aman",!1),await r("master_key_hash",null),await r("mode_aman_kdf",null),await r("mode_aman_salt",null),alert("Mode Aman dinonaktifkan"))}J();var u=ra(),m=a(u),n=a(m),c=i(a(n),2),b=a(c,!0);t(c),t(n);var _=i(n,2);{var K=e=>{var s=ia();v("click",s,f),x(e,s)},N=e=>{var s=sa();v("click",s,S),x(e,s)};$(_,e=>{l(o).mode_aman?e(K):e(N,!1)})}t(m),t(u),R(()=>w(b,l(o).mode_aman?"Aktif":"Nonaktif")),x(A,u),q()}var na=y('<section><h1 class="text-xl font-semibold mb-4">Setelan</h1> <div class="bg-white border rounded-lg p-4 space-y-4"><div class="flex items-center justify-between"><div><div class="text-sm text-gray-500">Tema</div> <div class="font-medium"> </div></div> <button class="btn-base bg-primary text-white">Toggle</button></div> <div><div class="text-sm text-gray-500">Ukuran Font</div> <div class="mt-2 flex gap-2"><button class="px-3 py-2 border rounded">Kecil</button> <button class="px-3 py-2 border rounded">Normal</button> <button class="px-3 py-2 border rounded">Besar</button></div> <div class="mt-2 text-sm text-gray-600"> </div></div></div> <div class="mt-4"><h2 class="text-lg font-semibold mb-2">Keamanan</h2> <div><div class="mb-3"><!></div></div></div> <div class="mt-6 bg-white border rounded-lg p-4"><div class="flex items-center justify-between"><div><div class="text-sm text-gray-500">Level Fitur</div> <div class="font-medium"> </div> <div class="text-sm text-gray-500">(auto-unlock ke GAMPANG saat >= 10 KK)</div></div> <div class="flex flex-col items-end gap-2"><label class="text-sm text-gray-500">Mode Profesional (manual)</label> <input type="checkbox"/></div></div></div> <div class="mt-6 bg-white border rounded-lg p-4"><div class="flex items-center justify-between"><div><div class="text-sm text-gray-500">Sampah</div> <div class="font-medium">Kelola data terhapus</div></div> <a href="/trash" class="btn-base border">Buka</a></div></div></section>');function ha(A,M){B(M,!1);let o=C({});X(async()=>{await U(),Q.subscribe(p=>I(o,p))});function S(){r("theme",l(o).theme==="dark"?"light":"dark")}function f(p){r("font_size",p)}async function u(p){p.target.checked?await r("level","PROFESIONAL"):(await r("level","MUDAH"),await U())}J();var m=na(),n=i(a(m),2),c=a(n),b=a(c),_=i(a(b),2),K=a(_,!0);t(_),t(b);var N=i(b,2);t(c);var e=i(c,2),s=i(a(e),2),k=a(s),g=i(k,2),j=i(g,2);t(s);var h=i(s,2),P=a(h);t(h),t(e),t(n);var d=i(n,2),O=i(a(d),2),z=a(O),V=a(z);oa(V,{}),t(z),t(O),t(d);var E=i(d,2),G=a(E),D=a(G),H=i(a(D),2),W=a(H,!0);t(H),T(2),t(D);var L=i(D,2),F=i(a(L),2);Y(F),t(L),t(G),t(E),T(2),t(m),R(()=>{w(K,l(o).theme||"auto"),w(P,`Mode saat ini: ${(l(o).font_size||"normal")??""}`),w(W,l(o).level||"MUDAH"),Z(F,l(o).level==="PROFESIONAL")}),v("click",N,S),v("click",k,()=>f("small")),v("click",g,()=>f("normal")),v("click",j,()=>f("large")),v("change",F,u),x(A,m),q()}export{ha as component};
