const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/BYCsMfeM.js","../chunks/h3MKsja5.js","../chunks/PPVm8Dsz.js","../chunks/CPdAUx58.js"])))=>i.map(i=>d[i]);
import{_ as R}from"../chunks/PPVm8Dsz.js";import{a as h,f as U}from"../chunks/DFmd7aBj.js";import"../chunks/DigF5LTR.js";import{p as T,a as V,b as i,c as p,r as l,g as X,m as $,s as S}from"../chunks/LtRqTWwp.js";import{e as m}from"../chunks/BwVSfNZk.js";import{i as B}from"../chunks/okGzk5Aq.js";import{i as J}from"../chunks/BvBIkWR3.js";import{e as k,i as A}from"../chunks/B84wUVil.js";import{l as M,s as q}from"../chunks/BPcVCNGp.js";function f(d,u="backup.cakap"){const n=new Blob([JSON.stringify(d,null,2)],{type:"application/json"}),e=URL.createObjectURL(n),s=document.createElement("a");s.href=e,s.download=u,document.body.appendChild(s),s.click(),s.remove(),URL.revokeObjectURL(e)}async function z(d){return new Promise((u,n)=>{const e=new FileReader;e.onload=()=>{try{u(JSON.parse(e.result))}catch(s){n(s)}},e.onerror=()=>n(e.error),e.readAsText(d)})}var G=U('<div class="mt-2 text-sm text-gray-500">Importing...</div>'),H=U('<section><h1 class="text-xl font-semibold mb-4">Backup & Restore</h1> <div class="bg-white border rounded-lg p-4 space-y-4"><div><div class="text-sm text-gray-500">Export (.cakap)</div> <div class="mt-2 flex gap-2"><button class="btn-base bg-primary text-white">Export (plain)</button> <button class="btn-base border">Export (encrypted)</button> <button class="btn-base border">Export CSV (PRO)</button> <button class="btn-base border">Export Excel (PRO)</button></div></div> <div><div class="text-sm text-gray-500">Import (.cakap)</div> <div class="mt-2"><input type="file" accept=".cakap,application/json"/> <!></div></div></div></section>');function nt(d,u){T(u,!1);let n={},e=$(!1);M(),q.subscribe(t=>n=t);async function s(){if(n.mode_aman){const a=prompt("Mode Aman aktif â€” masukkan password untuk backup terenkripsi");if(!a)return alert("Dibatalkan");const o=await k({encrypt:!0,password:a});f(o.payload,`rt-cakap-backup-encrypted-${Date.now()}.cakap`);return}const r=await k({encrypt:!1});f(r.payload,`rt-cakap-backup-${Date.now()}.cakap`)}async function D(){const t=prompt("Masukkan password untuk backup terenkripsi (ingat password ini)");if(!t)return alert("Dibatalkan");const r=await k({encrypt:!0,password:t});f(r.payload,`rt-cakap-backup-encrypted-${Date.now()}.cakap`)}async function I(){if(n.level!=="PROFESIONAL")return alert("Export CSV hanya untuk Level PROFESIONAL");const{exportKKToCSV:t}=await R(async()=>{const{exportKKToCSV:N}=await import("../chunks/BYCsMfeM.js");return{exportKKToCSV:N}},__vite__mapDeps([0,1,2]),import.meta.url),r=await t(),a=new Blob([r],{type:"text/csv;charset=utf-8;"}),o=URL.createObjectURL(a),c=document.createElement("a");c.href=o,c.download=`rt-cakap-kk-${Date.now()}.csv`,document.body.appendChild(c),c.click(),c.remove(),URL.revokeObjectURL(o)}async function P(){if(n.level!=="PROFESIONAL")return alert("Export Excel hanya untuk Level PROFESIONAL");const{exportKKToXLSX:t}=await R(async()=>{const{exportKKToXLSX:c}=await import("../chunks/CPdAUx58.js");return{exportKKToXLSX:c}},__vite__mapDeps([3,1,2]),import.meta.url),r=await t(),a=URL.createObjectURL(r),o=document.createElement("a");o.href=a,o.download=`rt-cakap-kk-${Date.now()}.xlsx`,document.body.appendChild(o),o.click(),o.remove(),URL.revokeObjectURL(a)}async function j(t){const r=t.target.files[0];if(r){S(e,!0);try{const a=await z(r);if(a&&a.data)await A(a,{encrypted:!1,merge:!0}),alert("Import berhasil (merge)");else if(a&&a.version){const o=prompt("Masukkan password untuk import terenkripsi");await A(a,{encrypted:!0,password:o,merge:!0}),alert("Import terenkripsi berhasil")}else alert("Format file tidak dikenali")}catch(a){alert("Import gagal: "+a.message)}finally{S(e,!1),t.target.value=""}}}J();var b=H(),w=i(p(b),2),v=p(w),y=i(p(v),2),x=p(y),g=i(x,2),_=i(g,2),F=i(_,2);l(y),l(v);var E=i(v,2),L=i(p(E),2),O=p(L),C=i(O,2);{var K=t=>{var r=G();h(t,r)};B(C,t=>{X(e)&&t(K)})}l(L),l(E),l(w),l(b),m("click",x,s),m("click",g,D),m("click",_,I),m("click",F,P),m("change",O,j),h(d,b),V()}export{nt as component};
